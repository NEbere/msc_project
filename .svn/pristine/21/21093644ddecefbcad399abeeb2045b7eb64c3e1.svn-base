// Third party imports
import { Component, OnInit } from '@angular/core';
import { Router } from '@angular/router';

// Local imports
import { AuthServiceService } from '../../services/auth-service.service';
@Component({
  selector: 'app-home',
  templateUrl: 'home.page.html',
  styleUrls: ['home.page.scss'],
})
export class HomePage implements OnInit{
  userProfile: any = {}
  userProfileLoaded: boolean = false;
  
  constructor(
    private authservice: AuthServiceService,
    private router: Router
  ) {}

  ngOnInit() {
    const user = this.authservice.getUserFromStorage();
      if(!user){
        this.router.navigate(['login'])
      } else {
       this.getUserProfile()
      }    
  }

  getUserProfile(){
    this.authservice.getUserProfile()
    .then(response => {
      this.userProfileLoaded = true;
      this.userProfile = response.user;

      console.log(this.userProfile, 'this.userProfile')
    })
    .catch(error => {
      console.log(error)
    });
  }
}
