import { Component, OnInit } from '@angular/core';
import { NavController } from '@ionic/angular';
import { ApiServiceService } from '../../../services/api-service.service';

import { STEP_ITEMS } from './constants';
export interface Meal {
  query: string;
}

export interface TourPreference {
  tourCity: string;
  breakfast: Meal;
  lunch: Meal;
  dinner: Meal;
  nightlifeCategoryId: String;
  interests: Array<String>;
}

@Component({
  selector: 'app-create-tour',
  templateUrl: './create-tour.component.html',
  styleUrls: ['./create-tour.component.scss'],
})
export class CreateTourComponent implements OnInit {

  formContent: any;
  formData: any;
  activeStepIndex: number;
  preference: TourPreference;
  itenarnaryCreated: boolean = false;

  constructor(
    private apiService: ApiServiceService,
  ) { }

  ngOnInit() {
    this.formContent = STEP_ITEMS;
    this.formData = {};
  }

  planTour() {
    console.log('lets go!');
  }

  selectChange(e) {
    console.log(e);
  }

  onFormSubmit(formData: any): void {
    this.formData = formData;
    this.preference = {
      tourCity: this.formData.city,
      breakfast: { query: this.formData.breakfast },
      lunch: { query: this.formData.lunch },
      dinner: { query: this.formData.dinner },
      nightlifeCategoryId: this.formData.nightlife,
      interests: [
        this.formData.museum,
        this.formData.outdoorsAndRecreation,
        this.formData.entertainment,
        this.formData.others,
      ]
    }
    // post form data here

    this.apiService.createTour(this.preference).then(res => {
      console.log(res, 'response from create tour component')
    })

    console.log(this.formData, 'Create tour component');
    console.log(this.preference, 'this.preference ==>');
  }
}
